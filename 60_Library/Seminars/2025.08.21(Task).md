# Task

window.open(url, 'externel')
## 1. ì¹´ë©”ë¼ íŒŒë¼ë¯¸í„°ë¥¼ ëª¨ë¥¼ ë•Œ(intrinsic parameter), ì¹´ë©”ë¼ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ì„ í†µí•´ì„œ intrinsic íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ì •
---

## **ğŸ” 1. Intrinsic Matrix $K$**

  

ì¶œë ¥:

```
[[4.15386317e+03 0.00000000e+00 1.48668147e+03]
 [0.00000000e+00 3.68919473e+03 2.11038416e+03]
 [0.00000000e+00 0.00000000e+00 1.00000000e+00]]
```

ì¼ë°˜í˜•:

$$

K = \begin{bmatrix}

f_x & 0 & c_x \\

0 & f_y & c_y \\

0 & 0 & 1

\end{bmatrix}

$$

- $f_x = 4153.9$, $f_y = 3689.2$
    
    â†’ **í™”ì†Œ ë‹¨ìœ„ì˜ ì´ˆì  ê±°ë¦¬**. ì„¼ì„œ í”½ì…€ í¬ê¸°ë¥¼ ê³ ë ¤í•œ ê°’.
    
    â†’ ê°’ì´ í¬ë‹¤ëŠ” ê±´ ì¹´ë©”ë¼ í™”ê°ì´ ì¢ê³  ë§ì›ì— ê°€ê¹ë‹¤ëŠ” ëœ».
    
- $(c_x, c_y) = (1486.7, 2110.4)$
    
    â†’ **ì£¼ì (Principal Point)**: ê´‘ì¶•ì´ ì´ë¯¸ì§€ í‰ë©´ê³¼ ë§Œë‚˜ëŠ” ìœ„ì¹˜.
    
    â†’ í•´ìƒë„ì˜ ì •ì¤‘ì•™ê³¼ ë¹„êµí•´ì„œ ì–¼ë§ˆë‚˜ ì¹˜ìš°ì³ ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ.
    
    â†’ ì˜ˆë¥¼ ë“¤ì–´ í•´ìƒë„ê°€ 3000Ã—4000ì´ë¼ë©´ ëŒ€ëµ ì¤‘ì•™ ê·¼ì²˜ì— ìˆìŒ.
    
- ìš°í•˜ë‹¨ 1ì€ ë™ì°¨ ì¢Œí‘œ ìŠ¤ì¼€ì¼ë§ìš©.
    

---

## **ğŸ” 2. Distortion Coefficients**

  

ì¶œë ¥:

```
[ 3.64468255e-01  5.57252159e+00  5.31788062e-03  1.76001089e-03 -1.75974697e+02]
```

OpenCV ê¸°ì¤€:

$[k_1, k_2, p_1, p_2, k_3]$

- $k_1 = 0.364$, $k_2 = 5.573$, $k_3 = -175.97$
    
    â†’ **ë°©ì‚¬(radial) ì™œê³¡ ê³„ìˆ˜**
    
    â†’ ê°’ì´ í´ìˆ˜ë¡ ì§ì„ ì´ íœ˜ëŠ” ì •ë„ê°€ ì‹¬í•¨.
    
    â†’ íŠ¹íˆ $k_3$ì´ ë§¤ìš° í° ìŒìˆ˜ â†’ ì´ë¯¸ì§€ ì£¼ë³€ë¶€ ì™œê³¡ì´ ê°•í•˜ë‹¤ëŠ” ì˜ë¯¸.
    
    â†’ ì‚¬ì§„ í™•ëŒ€í•´ì„œ ì²´ì»¤ë³´ë“œ ëª¨ì„œë¦¬ ì£¼ë³€ì„ ë³´ë©´ ì›í˜• ì™œê³¡ì´ í´ í™•ë¥ ì´ ë†’ìŒ.
    
- $p_1 = 0.0053$, $p_2 = 0.00176$
    
    â†’ **ì ‘ì„ (tangential) ì™œê³¡ ê³„ìˆ˜**
    
    â†’ ë Œì¦ˆ-ì„¼ì„œ ì •ë ¬ì´ ì‚´ì§ í‹€ì–´ì ¸ì„œ ì´ë¯¸ì§€ê°€ ë¹„ìŠ¤ë“¬íˆ ëŠ˜ì–´ì§€ëŠ” ì™œê³¡.
    
    â†’ ê°’ì´ 0ì— ê°€ê¹Œìš°ë¯€ë¡œ ì ‘ì„  ì™œê³¡ì€ ë¯¸ë¯¸.
    

---

## **ğŸ” 3. Reprojection RMS Error**

  

ì¶œë ¥:

```
Reprojection RMS (px): 0.7494
```

- ì •ì˜:
    
    ì²´ì»¤ë³´ë“œ ì½”ë„ˆì˜ **ì‹¤ì œ ê²€ì¶œ ìœ„ì¹˜**(í”½ì…€)ì™€,
    
    ë³´ì •ëœ íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•´ **ì´ë¡ ì ìœ¼ë¡œ íˆ¬ì˜í•œ ìœ„ì¹˜**(í”½ì…€) ì°¨ì´ì˜ í‰ê·  ì œê³±ê·¼.
    
- $0.75$ í”½ì…€ ì˜¤ì°¨ â†’ **ë§¤ìš° ì–‘í˜¸**í•œ ìˆ˜ì¤€.
    
    ì¼ë°˜ì ìœ¼ë¡œ < 1.0 px ì´ë©´ ë³´ì • í’ˆì§ˆì´ ì¢‹ë‹¤ê³  íŒë‹¨.
    
- ì´ ê°’ì´ ì»¤ì§€ë©´ â†’
    
    (1) ì½”ë„ˆ ê²€ì¶œ í’ˆì§ˆ ì €í•˜,
    
    (2) ì…ë ¥ ì´ë¯¸ì§€ ìˆ˜ ë¶€ì¡±/ì‹œì  ë‹¤ì–‘ì„± ë¶€ì¡±,
    
    (3) ë Œì¦ˆ ì™œê³¡ì´ ë„ˆë¬´ ì‹¬í•˜ê±°ë‚˜ ëª¨ë¸ì´ ì˜ ì•ˆ ë§ìŒ.
    

---

## **âœ… ì¢…í•© í•´ì„**

1. **ì´ˆì  ê±°ë¦¬**: ì•½ 4000 px â†’ ì„¼ì„œ ëŒ€ë¹„ í™”ê°ì´ ì¢ê³  ë§ì› ì„±ê²©.
    
2. **ì£¼ì **: ì´ë¯¸ì§€ ì¤‘ì•™ ê·¼ì²˜ â†’ ì„¼ì„œ ì •ë ¬ì´ í¬ê²Œ í‹€ì–´ì§€ì§€ ì•ŠìŒ.
    
3. **ì™œê³¡ ê³„ìˆ˜**:
    
    - ë°©ì‚¬ ì™œê³¡ì´ í¬ë‹¤ ($k_2, k_3$) â†’ ê¼­ ì™œê³¡ ë³´ì • ë‹¨ê³„ë¥¼ ê±°ì³ì•¼ í•¨.
        
    - ì ‘ì„  ì™œê³¡ì€ ê±°ì˜ ì—†ìŒ.
        
    
4. **RMS ì˜¤ì°¨**: 0.75 px â†’ ì‹ ë¢° ê°€ëŠ¥í•œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ê²°ê³¼.
    

---

ğŸ‘‰ ì´ì œ ì´ Intrinsics($K$)ì™€ Distortion($k_i, p_i$)ë¥¼ ì´ìš©í•˜ë©´

- ì´ë¯¸ì§€ undistort ê°€ëŠ¥
    
- ìŠ¤í…Œë ˆì˜¤ rectification ê°€ëŠ¥
    
- disparity â†’ depth ë³€í™˜ ê°€ëŠ¥
    

  

ì¦‰, **ê¹Šì´ ì¶”ì •ì˜ ì ˆëŒ€ ìŠ¤ì¼€ì¼**ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 2. ë‘ ì´¬ì˜ëœ ì´ë¯¸ì§€ë¥¼ í†µí•´ì„œ extrinsic parameter ì¶”ì •, epipolar geometryë¥¼ í†µí•´ì„œ disparity map ìƒì„±

ì—¬ê¸°ì„œ depth imageë¥¼ í†µí•´ì„œ ì ˆëŒ€ì ì¸ ê¸¸ì´ë¥¼ ì•Œ ìˆ˜ ìˆëŠ”ê°€?
íŠ¹ìˆ˜í•œ ì²´ì»¤ë³´ë“œ ì´ë¯¸ì§€(ì •í™•í•œ ê¸¸ì´ë¥¼ ë§ì¶˜ ì´ë¯¸ì§€) ë¥¼ í†µí•´ì„œ ìƒëŒ€ì ì¸ ê±°ë¦¬ë“¤ì„ ì ˆëŒ€ì ì¸ ê²ƒìœ¼ë¡œ ë³€í™˜ ê°€ëŠ¥í•˜ë‹¤.
ì§ì ‘ ì´¬ì˜í•œ ì‚¬ì§„ìœ¼ë¡œ ìœ„ì˜ ê³¼ì • í•´ë³´ê¸°, (depth map ì¶”ì •)

## 3. baselineì´ ê°€ê¹Œì›€, ì¤‘ê°„, ë©ˆ ë“±ìœ¼ë¡œ ì¡°ì ˆí•´ê°€ë©° í•´ë³´ê¸°

Â ê³¼ì œ í•´ê²°ì„ ìœ„í•œ ì½”ë“œë¥¼ ì‘ì„±í•´ì¤˜

```bash

(cv) mac_air@Air-Jeongbeen CV_and_DL % >....                                                                                                                     
  --right /Users/mac_air/CV_and_DL/pairs/IMG_3460_resized.jpeg \
  --intrinsics /Users/mac_air/CV_and_DL/intrinsics.npz \
  --pattern_rows 7 --pattern_cols 10 \
  --square_m 0.025 \
  --out_dir /Users/mac_air/CV_and_DL/out/near \
  --num_disp 256 \
  --block_size 5
[INFO] Relative translation (unit-norm): t_rel = [ 0.94694855  0.29322619 -0.13155549]  (||t||=1.0000)
[WARN] Checkerboard not found in both images. Cannot compute absolute scale from board.
[WARN] No absolute scale available; results will be up-to-scale only.
[RESULT] Baseline unknown (relative only). Depth is not metric.
[INFO] Chessboard not reliably detected in rectified images for sanity check.
[OK] Saved:
  - Rectified images: /Users/mac_air/CV_and_DL/out/near/rect_left.png, rect_right.png
  - Disparity: /Users/mac_air/CV_and_DL/out/near/disparity_px.npy (float32 pixels), 'disparity_vis.png' for preview
  - Depth: /Users/mac_air/CV_and_DL/out/near/depth_m.npy (float32 meters), 'depth_vis.png' for preview
```

```bash
(cv) mac_air@Air-Jeongbeen CV_and_DL % >....                                                                                                                     
  --right /Users/mac_air/CV_and_DL/pairs/IMG_3461_resized.jpeg \
  --intrinsics /Users/mac_air/CV_and_DL/intrinsics.npz \
  --pattern_rows 7 --pattern_cols 10 \
  --square_m 0.025 \
  --out_dir /Users/mac_air/CV_and_DL/out/mid \ 
  --num_disp 256 \
  --block_size 5
Traceback (most recent call last):
  File "/Users/mac_air/CV_and_DL/stereo_depth_pipeline.py", line 441, in <module>
    main()
    ~~~~^^
  File "/Users/mac_air/CV_and_DL/stereo_depth_pipeline.py", line 333, in main
    pts1, pts2, kps1, kps2, matches = match_features(imgL, imgR)
                                      ~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/mac_air/CV_and_DL/stereo_depth_pipeline.py", line 113, in match_features
    raise RuntimeError("Not enough good matches after ratio test.")
RuntimeError: Not enough good matches after ratio test.

ERROR conda.cli.main_run:execute(125): `conda run python /Users/mac_air/CV_and_DL/stereo_depth_pipeline.py depth --left /Users/mac_air/CV_and_DL/pairs/IMG_3459_resized.jpeg --right /Users/mac_air/CV_and_DL/pairs/IMG_3461_resized.jpeg --intrinsics /Users/mac_air/CV_and_DL/intrinsics.npz --pattern_rows 7 --pattern_cols 10 --square_m 0.025 --out_dir /Users/mac_air/CV_and_DL/out/mid --num_disp 256 --block_size 5` failed. (See above for error)
```
